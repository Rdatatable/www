<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; }
code > span.dt { color: #902000; }
code > span.dv { color: #40a070; }
code > span.bn { color: #40a070; }
code > span.fl { color: #40a070; }
code > span.ch { color: #4070a0; }
code > span.st { color: #4070a0; }
code > span.co { color: #60a0b0; font-style: italic; }
code > span.ot { color: #007020; }
code > span.al { color: #ff0000; font-weight: bold; }
code > span.fu { color: #06287e; }
code > span.er { color: #ff0000; font-weight: bold; }
  </style>
  <link rel="stylesheet" href="../css/bootstrap.css" type="text/css" />
</head>
<body>
<!-- <body> -->
<!-- Master nav - DO NOT TOUCH-->
<header>
<div class="navbar-default">
<button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#navbar-main">
<span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span>
</button>
<nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation">
<ul class="nav navbar-nav">
<li>
<a href="../"><span class="glyphicon glyphicon-home"></span> data.table</a>
</li>
</ul>
<ul class="nav navbar-nav navbar-left">
<li class="dropdown">
<a class="dropdown-toggle" data-toggle="dropdown" href="#" id="docs"><span class="glyphicon glyphicon-pencil"></span> Get started <span class="caret"></span></a>
<ul class="dropdown-menu" aria-labelledby="docs">
<li>
<a href="../about/">data.table project</a>
</li>
<li>
<a href="../intro/">Quick Introduction</a>
</li>
<li>
<a href="./">Learn with example</a>
</li>
<li>
<a href="../faq/">FAQs</a>
</li>
</ul>
</li>
<li>
<a href="../benchmarks/"><span class="glyphicon glyphicon-wrench"></span> Benchmarks</a>
</li>
<li>
<a href="../gallery/"><span class="glyphicon glyphicon-book"></span> Gallery</a>
</li>
<li>
<a href="../new/"><span class="glyphicon glyphicon-cog"></span> What’s new</a>
</li>
</ul>
<ul class="nav navbar-nav navbar-right">
<li class="dropdown">
<a class="dropdown-toggle" data-toggle="dropdown" href="#" id="docs"><span class="glyphicon glyphicon-question-sign"></span> How to<span class="caret"></span></a>
<ul class="dropdown-menu" aria-labelledby="docs">
<li>
<a href="../get-involved/">Get involved</a>
</li>
</ul>
</li>
<li>
<a href="../notes/">Release Notes</a>
</li>
</ul>
</nav>
</div>
</header>
<!-- learn-by-example/index.html -->
<!-- ACTUAL CONTENT STARTS HERE -->
<div class='container bs-docs-container'>
<div class='row'>
<div class='col-md-9'>
<p class='leadtop'> 
This section is basically a verbose version of selected topics from <code4>example(data.table)</code4> to illustrate the most common data manipulation operations using <code>data.table</code>.
</p>
<h1 id="basics" class="page-header">Basics</h1>
<p class='lead'> 
Let’s start by looking at different ways of creating a <code>data.table</code>.
</p>
<div class='bs-docs-section'>
<h3 id="creating-a-data-table">Creating a data.table</h3>
<p > 
This is already mentioned in the <a href="">Quick introduction guide</a>. But for completeness, we’ll cover it again.
</p>
<p > 
We can create a <code>data.table</code> using the <code4>data.table()</code4> function:
</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># creation of a data.frame</span>
DF &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">x=</span><span class="dv">1</span>:<span class="dv">2</span>, <span class="dt">y=</span>letters[<span class="dv">1</span>:<span class="dv">2</span>], <span class="dt">stringsAsFactors=</span><span class="ot">FALSE</span>)
DF
<span class="co">#   x y</span>
<span class="co"># 1 1 a</span>
<span class="co"># 2 2 b</span>

<span class="co"># creation of a data.table</span>
DT &lt;-<span class="st"> </span><span class="kw">data.table</span>(<span class="dt">x=</span><span class="dv">1</span>:<span class="dv">2</span>, <span class="dt">y=</span>letters[<span class="dv">1</span>:<span class="dv">2</span>])
DT
<span class="co">#    x y</span>
<span class="co"># 1: 1 a</span>
<span class="co"># 2: 2 b</span></code></pre>
<div id="strings-as-factors" class="bs-callout bs-callout-info">
<p > 
Note that we dint have to use <code>stringsAsFactors=FALSE</code> during the creation of <code>data.table</code>. This is because, since <strong>v1.8.0</strong><span class="text-danger"></span>, <code>data.table</code> <strong>does not</strong> convert <code>character</code> to <code>factor</code>, by default.
</p>
</div>
<h4>Using as.data.table</h4>
<p>Similar to <code4>as.data.frame()</code4>, <code4>as.data.table()</code4> methods also exist to convert other objects to <code>data.table</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">methods</span>(as.data.table)
<span class="co">#  [1] as.data.table.character*  as.data.table.data.frame* as.data.table.data.table* as.data.table.Date*      </span>
<span class="co">#  [5] as.data.table.factor*     as.data.table.integer*    as.data.table.list*       as.data.table.logical*   </span>
<span class="co">#  [9] as.data.table.matrix*     as.data.table.numeric*    as.data.table.ordered*    as.data.table.table*     </span>
<span class="co">#</span>
<span class="co">#    Non-visible functions are asterisked</span>

<span class="co"># convert the data.frame DF to data.table</span>
DF_to_DT &lt;-<span class="st"> </span><span class="kw">as.data.table</span>(DF)
DF_to_DT
<span class="co">#    x y</span>
<span class="co"># 1: 1 a</span>
<span class="co"># 2: 2 b</span></code></pre>
<p > 
It’s better to use <code4>as.data.table()</code4> wherever possible because it has lesser overhead compared to <code4>data.table()</code4> and is therefore likely to be faster.
</p>
<h4>Using setDT</h4>
<p > 
From<span class="text-danger"> <strong>v1.9.0</strong></span>, following <a href="http://stackoverflow.com/questions/20345022/convert-a-data-frame-to-a-data-table-without-copy">a post on SO</a>, <code4>setDT()</code4> was implemented which accepts a <code>list</code>, <code>data.frame</code> or <code>data.table</code> and converts it into a <code>data.table</code> <strong>by reference</strong> - no copy is being made at all.
</p>
<pre class="sourceCode r"><code class="sourceCode r">dat &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">x=</span><span class="dv">1</span>:<span class="dv">2</span>, <span class="dt">y=</span><span class="dv">3</span>:<span class="dv">4</span>)
<span class="kw">setDT</span>(dat) <span class="co"># now a data.atable</span>
dat
<span class="co">#    x y</span>
<span class="co"># 1: 1 3</span>
<span class="co"># 2: 2 4</span></code></pre>
<p > 
This conversion, since does no copying, will be instant - especially handy when working with <em>very large</em> objects.
</p>
<hr />
<h3>Subset on a data.table</h3>
<h4>Subset rows</h4>
<p > 
Before we discuss subset on <code>data.tables</code>, let’s consider <code>data.frames</code> briefly. Suppose one wants to subset rows satisfying a condition, say, column <code>x &gt; 1</code> on a <code>data.frame</code>, one way to perform this operation would be to use the <code4>$</code4> operator, ex: <code>DF[DF$x &gt; 1L, ]</code>. We could also accomplish this task using the base function <code4>with()</code4>, as shown below.
</p>
<pre class="sourceCode r"><code class="sourceCode r">DF &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">x=</span><span class="kw">rep</span>(<span class="dv">1</span>:<span class="dv">2</span>, 3L), <span class="dt">y=</span><span class="dv">10</span>:<span class="dv">15</span>)
<span class="co"># using with()</span>
DF[<span class="kw">with</span>(DF, x &gt;<span class="st"> </span>1L), ]
<span class="co">#   x  y</span>
<span class="co"># 2 2 11</span>
<span class="co"># 4 2 13</span>
<span class="co"># 6 2 15</span></code></pre>
<p > 
<code>data.tables</code> <em>by default</em> does this for you, for convenience. In other words, <code>data.table</code>’s <code4>i</code4> <em>sees</em> it’s columns as variables. This enables us to subset as:
</p>
<pre class="sourceCode r"><code class="sourceCode r">DT &lt;-<span class="st"> </span><span class="kw">data.table</span>(<span class="dt">x=</span><span class="kw">rep</span>(<span class="dv">1</span>:<span class="dv">2</span>, 3L), <span class="dt">y=</span><span class="dv">10</span>:<span class="dv">15</span>)
DT[x &gt;<span class="st"> </span>1L] <span class="co"># Note that &#39;,&#39; is optional here</span>
<span class="co">#    x  y</span>
<span class="co"># 1: 2 11</span>
<span class="co"># 2: 2 13</span>
<span class="co"># 3: 2 15</span></code></pre>
It will work using the <code4>$</code4> operator as well, but it’s not necessary and not the idiomatic <code>data.table</code> way.
<div id="strings-as-factors" class="bs-callout bs-callout-info">
<p > 
<strong>Note:</strong> For examples on <em>fast</em> subset based on data.table’s <strong>binary search</strong>, go to <a href="">section #</a>.
</p>
</div>
<h4>Subset columns</h4>
<p > 
In the <a href="#subset-rows">previous section</a>, we saw that <code>data.table</code>’s <code4>i</code4> extends <code>data.frame</code>’s functionality for convenient subset, by seeing column names as variables within the scope of DT.
</p>
<p > 
Similarly, <code>data.table</code> also extends the functionality of <code4>j</code4>. In a <code>data.table</code>, <code4>j</code4>, by default, is <code2>an expression</code2> that is evaluated within the scope of DT. This is explained quite clearly in the <a href="">Beginner’s FAQ: 1.1 and 1.2</a>.
</p>
<p > 
We’ll see what this means and how this feature extends functionality in the <a href="">aggregation section</a>. In this section, let’s see what this functionality means with respect to subset on columns.
</p>
<strong>Column subset the data.table way:</strong>
</div>
</div>
<!-- col-md-9 -->
</div>
</div>
<!-- FOOTER - YOU WOULDNT HAVE TO MODIFY THIS PART -->
<footer class="bs-footer" role="contentinfo">
<div class="container">
<iframe src="http://ghbtns.com/github-btn.html?user=Rdatatable&repo=data.table&type=watch&count=true"
allowtransparency="true" frameborder="0" scrolling="0" width="110" height="20"></iframe>
<iframe src="http://ghbtns.com/github-btn.html?user=Rdatatable&repo=data.table&type=fork&count=true"
allowtransparency="true" frameborder="0" scrolling="0" width="95" height="20"></iframe>
<div class="footer-links">
<ul class="footer-links muted">
<p>
Designed using <a href="http://getbootstrap.com">Bootstrap</a> and styled with <a href="http://bootswatch.com/">Bootswatch</a> using <a href="http://bootswatch.com/cerulean">Cerulean</a> theme.
</p>
<li>
Version 1.9.2
</li>
<li>
·
</li>
<li>
<a href="https://github.com/Rdatatable/data.table">Homepage</a>
</li>
<li>
·
</li>
<li>
<a href="https://github.com/Rdatatable/data.table/graphs/contributors">Contributors</a>
</li>
<li>
·
</li>
<li>
<a href="https://github.com/Rdatatable/data.table/issues?direction=desc&labels=bug&sort=updated&state=open">Issues</a>
</li>
<li>
·
</li>
<li>
<a href="https://github.com/Rdatatable/data.table/issues?direction=desc&labels=feature+request&page=1&sort=updated&state=open">Feature Requests</a>
</li>
<li>
·
</li>
<li>
<a href="https://r-forge.r-project.org/mail/?group_id=240">Mailing list</a>
</li>
<li>
·
</li>
<li>
<a href="http://stackoverflow.com/questions/tagged/r+data.table">Stackoverflow tag</a>
</li>
<span class="pull-right"><a href="#top">Back to top</a></span>
</ul>
</footer>
<script src="https://code.jquery.com/jquery.js"></script>
<script src="../js/waypoints.js"></script>
<script src="../js/bootstrap.min.js"></script>
<script src="../js/docs.min.js"></script>
<!-- Start of StatCounter Code -->
<script type="text/javascript">
var sc_project=6237851;
var sc_invisible=1;
var sc_security="518c93ca";
</script>
<script type="text/javascript" src="http://www.statcounter.com/counter/counter.js"></script>
<noscript>
<div class="statcounter">
<a title="tumblr stats" href="http://statcounter.com/tumblr/" > <img class="statcounter" src="http://c.statcounter.com/6237851/0/518c93ca/1/" alt="tumblr stats" ></a>
</div>
</noscript>
<!-- End of StatCounter Code -->
</body>
</html>
</body>
</html>
